根据笔记[如何处理发送消息的请求](如何处理发送消息的请求.md)可知，生产者发送的消息在broker端由`MessageStore`接口的`putMessage()`方法完成存储，`MessageStore`接口的默认实现类是`DefaultMessageStore`类。`MessageStore`接口定义了消息存储应该提供的方法：
```java
public interface MessageStore {
    boolean load();

    void start() throws Exception;

    void shutdown();

    void destroy();

    PutMessageResult putMessage(final MessageExtBrokerInner msg);

    PutMessageResult putMessages(final MessageExtBatch messageExtBatch);

    GetMessageResult getMessage(final String group, final String topic, final int queueId,
        final long offset, final int maxMsgNums, final MessageFilter messageFilter);

    long getMaxOffsetInQueue(final String topic, final int queueId);

    long getMinOffsetInQueue(final String topic, final int queueId);

    long getCommitLogOffsetInQueue(final String topic, final int queueId, final long consumeQueueOffset);

    long getOffsetInQueueByTime(final String topic, final int queueId, final long timestamp);

    MessageExt lookMessageByOffset(final long commitLogOffset);

    SelectMappedBufferResult selectOneMessageByOffset(final long commitLogOffset);

    SelectMappedBufferResult selectOneMessageByOffset(final long commitLogOffset, final int msgSize);

    String getRunningDataInfo();

    HashMap<String, String> getRuntimeInfo();

    long getMaxPhyOffset();

    long getMinPhyOffset();

    long getEarliestMessageTime(final String topic, final int queueId);

    long getEarliestMessageTime();

     
    long getMessageStoreTimeStamp(final String topic, final int queueId, final long consumeQueueOffset);

    long getMessageTotalInQueue(final String topic, final int queueId);

    SelectMappedBufferResult getCommitLogData(final long offset);

    boolean appendToCommitLog(final long startOffset, final byte[] data);

    void executeDeleteFilesManually();

    QueryMessageResult queryMessage(final String topic, final String key, final int maxNum, final long begin,
        final long end);

    void updateHaMasterAddress(final String newAddr);

    long slaveFallBehindMuch();

    long now();

    int cleanUnusedTopic(final Set<String> topics);

    void cleanExpiredConsumerQueue();

    boolean checkInDiskByConsumeOffset(final String topic, final int queueId, long consumeOffset);

    long dispatchBehindBytes();

    long flush();

    boolean resetWriteOffset(long phyOffset);

    long getConfirmOffset();

    void setConfirmOffset(long phyOffset);

    boolean isOSPageCacheBusy();

    long lockTimeMills();

    boolean isTransientStorePoolDeficient();

    LinkedList<CommitLogDispatcher> getDispatcherList();

    ConsumeQueue getConsumeQueue(String topic, int queueId);

    BrokerStatsManager getBrokerStatsManager();

    void handleScheduleMessageService(BrokerRole brokerRole);
}
```

上面的方法的作用在下面碰到的时候再逐个分析，